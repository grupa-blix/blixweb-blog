(()=>{const t="https://blix.pl"===window.location.origin?"https://blix.pl/blog/wp-json/blog/rate/":"/wp-json/blog/rate/",e=()=>{document.querySelector(".rating").classList.add("rated")};window.addEventListener("DOMContentLoaded",(()=>{const o=document.querySelector(".rating"),a=document.querySelectorAll(".rating__btns-wrapper .star");if(!o)return;const{postId:s}=o.dataset;JSON.parse(localStorage.getItem("ratedPosts"))||localStorage.setItem("ratedPosts",JSON.stringify([])),(t=>localStorage.getItem("ratedPosts").includes(t))(s)?e():a.forEach(((o,s)=>{o.addEventListener("mouseenter",(()=>{((t,e)=>{const o=document.querySelector(".rating__progress"),{rating:a}=t.dataset;e.forEach(((t,e)=>{e+1<=a&&t.classList.add("active")})),o.classList.add("d-none")})(o,a)})),o.addEventListener("mouseleave",(()=>{(t=>{const e=document.querySelector(".rating__progress");t.forEach((t=>{t.classList.remove("active")})),e.classList.remove("d-none")})(a)})),o.addEventListener("click",(()=>{(async o=>{const{rating:a}=o.dataset,{postId:s}=o.closest(".rating").dataset,r=document.querySelector(".rating__value"),n=await fetch(t,{method:"POST",body:JSON.stringify({postId:s,rating:a})}),{newRating:d}=await n.json();r.innerText=parseFloat(d).toFixed(1),(t=>{const e=JSON.parse(localStorage.getItem("ratedPosts"));e.push(t),localStorage.setItem("ratedPosts",JSON.stringify(e))})(s),(t=>{const e=document.querySelector(".rating__progress"),o=20*t.toFixed(1)/100*104+(4*Math.floor(t)>16?16:4*Math.floor(t));e.style.width=`${o}px`})(parseFloat(d)),e()})(o)}))}))}))})();