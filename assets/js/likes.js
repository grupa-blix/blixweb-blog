(()=>{const e=()=>{const e=document.querySelector(".likes"),{postId:t}=e.dataset;s(t)?e.classList.add("liked"):e.classList.remove("liked")},t=()=>{const e=document.querySelector(".likes .value"),t=document.querySelector(".details__likes");0!==parseInt(e.innerText)?(e.classList.remove("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))},s=e=>localStorage.getItem("likedPosts").includes(e),o=async()=>{const o=document.querySelector(".likes"),a=document.querySelector(".details__likes"),{postId:l}=o.dataset,d=s(l),n=new FormData;n.append("action","article_like"),n.append("postId",l),d?n.append("newValue",-1):n.append("newValue",1);const i=await fetch(myAjax.ajaxurl,{method:"post",body:n}),c=await i.json();console.log(c),o.querySelector(".value").innerText=c,a.querySelector("span").innerText=c,((e,t)=>{const s=JSON.parse(localStorage.getItem("likedPosts"));t?s.splice(s.indexOf(e),1):s.push(e),localStorage.setItem("likedPosts",JSON.stringify(s))})(l,d),e(),t()};window.addEventListener("DOMContentLoaded",(()=>{const s=document.querySelector(".likes__btn");JSON.parse(localStorage.getItem("likedPosts"))||localStorage.setItem("likedPosts",JSON.stringify([])),e(),t(),s.addEventListener("click",o)}))})();