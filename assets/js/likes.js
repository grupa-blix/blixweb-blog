(()=>{const e=()=>{const e=document.querySelector(".likes"),t=document.querySelector(".details__likes"),{postId:a}=e.dataset;s(a)?(e.classList.add("liked"),t.classList.add("liked")):(e.classList.remove("liked"),t.classList.remove("liked"))},t=()=>{const e=document.querySelector(".likes .value"),t=document.querySelector(".details__likes");0!==parseInt(e.innerText)?(e.classList.remove("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))},s=e=>localStorage.getItem("likedPosts").includes(e),a=async()=>{const a=document.querySelector(".likes"),l=document.querySelector(".details__likes"),{postId:d}=a.dataset,o=s(d),i=new FormData;i.append("action","article_like"),i.append("postId",d),o?i.append("newValue",-1):i.append("newValue",1);const n=await fetch(myAjax.ajaxurl,{method:"post",body:i}),c=await n.json();a.querySelector(".value").innerText=c,l.querySelector("span").innerText=c,((e,t)=>{const s=JSON.parse(localStorage.getItem("likedPosts"));t?s.splice(s.indexOf(e),1):s.push(e),localStorage.setItem("likedPosts",JSON.stringify(s))})(d,o),e(),t()};window.addEventListener("DOMContentLoaded",(()=>{const s=document.querySelector(".likes");JSON.parse(localStorage.getItem("likedPosts"))||localStorage.setItem("likedPosts",JSON.stringify([])),e(),t(),s.addEventListener("click",a)}))})();