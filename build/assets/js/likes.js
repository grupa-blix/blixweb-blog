(()=>{const e=()=>{const e=document.querySelector(".likes"),t=document.querySelector(".details__likes"),{postId:l}=e.dataset;s(l)?(e.classList.add("liked"),t.classList.add("liked")):(e.classList.remove("liked"),t.classList.remove("liked"))},t=()=>{const e=document.querySelector(".likes .value"),t=document.querySelector(".details__likes");0!==parseInt(e.innerText)?(e.classList.remove("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))},s=e=>localStorage.getItem("likedPosts").includes(e),l=async()=>{const l=document.querySelector(".likes"),a=document.querySelector(".details__likes"),{postId:d}=l.dataset,i=s(d),o=new FormData;o.append("action","article_like"),o.append("postId",d),i?o.append("newValue",-1):o.append("newValue",1);const n=await fetch(myAjax.ajaxurl,{method:"post",body:o}),c=await n.json();l.querySelector(".value").innerText=c,a.querySelector("span").innerText=c,((e,t)=>{const s=JSON.parse(localStorage.getItem("likedPosts"));t?s.splice(s.indexOf(e),1):s.push(e),localStorage.setItem("likedPosts",JSON.stringify(s))})(d,i),e(),t()};window.addEventListener("DOMContentLoaded",(()=>{const s=document.querySelector(".likes");if(!s)return;const a=document.querySelector(".main__details .details__likes");JSON.parse(localStorage.getItem("likedPosts"))||localStorage.setItem("likedPosts",JSON.stringify([])),e(),t(),s.addEventListener("click",l),a.addEventListener("click",(()=>{s.click()}))}))})();