(()=>{const e="https://blix.pl"===window.location.origin?"https://blix.pl/blog/wp-json/blog/like/":"/wp-json/blog/like/";let t=!1;const s=()=>{const e=document.querySelector(".likes"),t=document.querySelector(".details__likes"),{postId:s}=e.dataset;i(s)?(e.classList.add("liked"),t.classList.add("liked")):(e.classList.remove("liked"),t.classList.remove("liked"))},l=()=>{const e=document.querySelector(".likes .value"),t=document.querySelector(".details__likes");0!==parseInt(e.innerText)?(e.classList.remove("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))},i=e=>localStorage.getItem("likedPosts").includes(e),o=async()=>{if(t)return;t=!0;const o=document.querySelector(".likes"),d=document.querySelector(".details__likes"),{postId:n}=o.dataset,c=i(n);let a=1;c&&(a=-1);const r=await fetch(e,{method:"POST",body:JSON.stringify({postId:n,modifier:a})}),{newValue:u}=await r.json();o.querySelector(".value").innerText=u,d.querySelector("span").innerText=u,((e,t)=>{const s=JSON.parse(localStorage.getItem("likedPosts"));t?s.splice(s.indexOf(e),1):s.push(e),localStorage.setItem("likedPosts",JSON.stringify(s))})(n,c),s(),l(),setTimeout((()=>{t=!1}),2e3)};window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".likes");if(!e)return;const t=document.querySelector(".main__details .details__likes");JSON.parse(localStorage.getItem("likedPosts"))||localStorage.setItem("likedPosts",JSON.stringify([])),s(),l(),e.addEventListener("click",o),t.addEventListener("click",(()=>{e.click()}))}))})();