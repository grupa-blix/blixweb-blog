(()=>{const e="https://blix.pl"===window.location.origin?"https://blix.pl/blog/wp-json/blog/like/":"/wp-json/blog/like/",t=()=>{const e=document.querySelector(".likes"),t=document.querySelector(".details__likes"),{postId:s}=e.dataset;l(s)?(e.classList.add("liked"),t.classList.add("liked")):(e.classList.remove("liked"),t.classList.remove("liked"))},s=()=>{const e=document.querySelector(".likes .value"),t=document.querySelector(".details__likes");0!==parseInt(e.innerText)?(e.classList.remove("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))},l=e=>localStorage.getItem("likedPosts").includes(e),i=async()=>{const i=document.querySelector(".likes"),o=document.querySelector(".details__likes"),{postId:d}=i.dataset,n=l(d);let c=1;n&&(c=-1);const a=await fetch(e,{method:"POST",body:JSON.stringify({postId:d,modifier:c})}),{newValue:r}=await a.json();i.querySelector(".value").innerText=r,o.querySelector("span").innerText=r,((e,t)=>{const s=JSON.parse(localStorage.getItem("likedPosts"));t?s.splice(s.indexOf(e),1):s.push(e),localStorage.setItem("likedPosts",JSON.stringify(s))})(d,n),t(),s()};window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".likes");if(!e)return;const l=document.querySelector(".main__details .details__likes");JSON.parse(localStorage.getItem("likedPosts"))||localStorage.setItem("likedPosts",JSON.stringify([])),t(),s(),e.addEventListener("click",i),l.addEventListener("click",(()=>{e.click()}))}))})();